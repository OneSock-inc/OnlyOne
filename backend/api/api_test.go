package api

import (
	"backend/db"
	"context"
	"fmt"
	"log"
	"net/http"
	"net/http/httptest"
	"os"
	"strings"
	"testing"

	"cloud.google.com/go/firestore"
	"github.com/stretchr/testify/assert"
	"google.golang.org/api/iterator"
)

// use in tests
const pwd = "myPwd"
const usr = "myUsername"

func TestMain(m *testing.M) {
	os.Setenv("FIRESTORE_EMULATOR_HOST", "localhost:8080")
	client, _ := db.GetDBConnection()
	err := deleteCollection(context.Background(), client, client.Collection("users"), 64)
	if err != nil {
		log.Print(err.Error())
		os.Exit(1)
	}
	log.SetFlags(log.Flags() | log.Llongfile)
	Setup()
	exit := m.Run()

	os.Exit(exit)

}

func deleteCollection(ctx context.Context, client *firestore.Client,
	ref *firestore.CollectionRef, batchSize int) error {

	for {
		// Get a batch of documents
		iter := ref.Limit(batchSize).Documents(ctx)
		numDeleted := 0

		// Iterate through the documents, adding
		// a delete operation for each one to a
		// WriteBatch.
		batch := client.Batch()
		for {
			doc, err := iter.Next()
			if err == iterator.Done {
				break
			}
			if err != nil {
				return err
			}

			batch.Delete(doc.Ref)
			numDeleted++
		}

		// If there are no documents to delete,
		// the process is over.
		if numDeleted == 0 {
			return nil
		}

		_, err := batch.Commit(ctx)
		if err != nil {
			return err
		}
	}
}

func TestSetup(t *testing.T) {

	if router == nil {
		t.Errorf("engine is nil which should be impossible")
	}
}

func TestRoutes(t *testing.T) {

	routes := router.Routes()
	if routes == nil {
		t.Errorf("routes is nil which should be impossible")
	}
	// log.Printf("routes: %v\n", routes)

}
func TestLoginFail(t *testing.T) {

	w := httptest.NewRecorder()
	r := strings.NewReader(
		`{
		"username":"mojojo",
		"password":"mySecret"
	}`)
	req, _ := http.NewRequest("POST", "/user/login", r)
	router.ServeHTTP(w, req)

	assert.Equal(t, http.StatusUnauthorized, w.Code)
	log.Printf("%s", w.Body)
}
func newRegisterRequest() *http.Request {
	js := fmt.Sprintf(`{
		"username": "%s",
		"firstname": "firstname",
		"surname" : "surname",
		"password" : "%s",
		"shippingAddress" : "Planet earth, 3301"
	}`, usr, pwd)
	r := strings.NewReader(js)
	req, err := http.NewRequest("POST", "/user/register", r)
	if err != nil {
		log.Fatal(err.Error())
	}
	return req
}
func TestRegisterSuccess(t *testing.T) {
	w := httptest.NewRecorder()
	req := newRegisterRequest()
	router.ServeHTTP(w, req)
	assert.Equal(t, http.StatusCreated, w.Code)
}
func TestIllFormedLoginFail(t *testing.T) {
	js := fmt.Sprintf(`
	{"pwd": "%s",
	"usr" : "%s"} `, pwd, usr)
	req, _ := http.NewRequest("POST", "/user/login", strings.NewReader(js))
	w := httptest.NewRecorder()
	router.ServeHTTP(w, req)
	log.Printf("%s", w.Body)
	assert.Equal(t, http.StatusUnauthorized, w.Code)
}

func TestIllFormed2LoginFail(t *testing.T) {
	js := fmt.Sprintf(`
	{"password": "%s"}`, pwd)
	req, _ := http.NewRequest("POST", "/user/login", strings.NewReader(js))
	w := httptest.NewRecorder()
	router.ServeHTTP(w, req)
	log.Printf("%s", w.Body)
	assert.Equal(t, http.StatusUnauthorized, w.Code)
}

func TestLoginSucess(t *testing.T) {

	//delete all users
	client, _ := db.GetDBConnection()
	_ = deleteCollection(context.Background(), client, client.Collection("users"), 64)

	//Creat a user in the db (might not exist)
	w := httptest.NewRecorder()
	req := newRegisterRequest()
	router.ServeHTTP(w, req)
	log.Printf("%s", w.Body)
	assert.Equal(t, http.StatusCreated, w.Code)
	//login with said user
	w = httptest.NewRecorder()
	r := strings.NewReader(fmt.Sprintf(
		`{
			"username": "%s", 
			"password":"%s"
		}`, usr, pwd))
	req, err := http.NewRequest("POST", "/user/login", r)
	assert.Nil(t, err)
	router.ServeHTTP(w, req)
	assert.Equal(t, http.StatusOK, w.Code)
}
func newSockRequest(shoeSize uint16, type_ db.Profile, color string, descr string, picture string) *http.Request {
	r := strings.NewReader(fmt.Sprintf(`{
	"shoeSize": %d,
	"type": %d,
	"color": "%s",
	"description": "%s",
	"picture":"%s"}`, shoeSize, type_, color, descr, picture))
	return httptest.NewRequest("POST", "/sock/", r)
}

func getValidBase64Image() string {
	return "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hTXuyV8YymnLS1yn2Y84FrCIJETIqGADJViI0qqRYiJF+zEPf5/jT5JLJtcGGDnmUYYKyfGD/8Hvbs38+JibFIoB7S+2/TEIBHaBetW2v49tu34C+J+BK63pL9eA6U/Sq00tcgR0bwMX101N3gMud4DeJ10yJEfy0xTyeeD9jL4pC/TcAp2rbm+NfZw+AGnqKnEDHBwCQwXKXvN4d7C1t3/PNPr7AdvrctEzpzEuAAANeGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNC40LjAtRXhpdjIiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo5NzM5YTI2Ni0xNWM3LTRlMTktODI1My0zZWQ1ZTZkYWZlZDMiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDdkNjcyZDItYjk4My00NGFiLTkwNDAtMjI2N2Y4OTM2MmUwIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MGNkNjAxZWItMDNlZC00OWNjLTk2MWQtMWI1ZTQ0OTE5OTNmIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iTGludXgiCiAgIEdJTVA6VGltZVN0YW1wPSIxNjYxODUyODMwMTEzOTU4IgogICBHSU1QOlZlcnNpb249IjIuMTAuMzIiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDIyOjA4OjMwVDExOjQ3OjA4KzAyOjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyMjowODozMFQxMTo0NzowOCswMjowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI1ZGU1NzlmLWQ0MjYtNDc4My05MTE3LTBlN2M0YmU5MTNhNSIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiCiAgICAgIHN0RXZ0OndoZW49IjIwMjItMDgtMzBUMTE6NDc6MTArMDI6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAg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"
}

func TestAddSockWithoutUser(t *testing.T) {
	w := httptest.NewRecorder()
	req := newSockRequest(42, db.Profile(1), "red", "i used to wank in this one", getValidBase64Image())
	router.ServeHTTP(w, req)
	log.Printf("%s", w.Body.String())
	assert.Equal(t, http.StatusUnauthorized, w.Code)
}

func TestAddSockBadShoeSize(t *testing.T) {
	w := httptest.NewRecorder()
	req := newSockRequest(0, 0, "blue", "In a very good state", getValidBase64Image())
	router.ServeHTTP(w, req)
	log.Printf("%s", w.Body.String())

	assert.Equal(t, http.StatusUnauthorized, w.Code)
}
